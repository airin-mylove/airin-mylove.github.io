<html lang="en">
  <head>
    <meta name="author" content="MohamedDine" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Sweetheart - Airin‚ù§Ô∏è</title>
    <link rel="icon" href="icon.png">
    <link rel="shortcut icon" href="icon.png">
    <style>
      @import url("https://fonts.googleapis.com/css?family=Dosis:800|Lobster|Pacifico");

      * {
        box-sizing: border-box;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        padding: 0;
        margin: 0;
      }

      canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1; /* Mengatur agar tetap di belakang elemen lain */
        pointer-events: none; /* Agar tidak menghalangi interaksi dengan elemen lain */
      }

      body {
        font-family: "Dosis";
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      }

      .card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        text-align: center;
        max-width: 800px;
        width: 80%;
        position: relative;
        overflow: hidden;
      }

      .heart-container {
        margin: 2rem 0;
        position: relative;
      }

      .heart {
        fill: #ff4b6e;
        transform-origin: center;
        animation: pulse 1.5s ease-in-out infinite;
      }

      .message {
        font-size: 2.5rem;
        font-family: "Dosis";
        font-weight: bold;
        color: #ffb3c3;
        margin: 1rem 0;
        opacity: 0;
        transform: translateY(20px);
        animation: fadeIn 1s ease-out forwards;
      }

      .btn-container {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin: 1rem 0;
      }

      .btn {
        background: #ff4b6e;
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 50px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: transform 0.3s, background 0.3s;
        transition: 0.5s all;
      }

      a {
        text-decoration: none;
        color: white;
      }

      .btn-hide1 .btn-hide2 .btn-hide3 {
        display: none !important;
        opacity: 0;
      }

      .btn:hover {
        background: #ff3356;
        transform: scale(1.05);
      }

      .btn.no {
        background: #666;
      }

      .btn.no:hover {
        background: #555;
      }

      .floating-hearts {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }

      .question {
        display: none;
      }

      .question.active {
        display: block;
      }

      .no-btn-container {
        position: relative;
      }

      .no-btn-container .btn.no {
        position: relative;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes float {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        100% {
          transform: translateY(-100vh) rotate(360deg);
        }
      }

      @keyframes dodge {
        0% {
          transform: translateX(0);
        }
        50% {
          transform: translateX(100px);
        }
        100% {
          transform: translateX(0);
        }
      }

      .sparkle {
        fill: #ffd700;
        animation: sparkle 1s ease-in-out infinite;
      }

      @keyframes sparkle {
        0% {
          opacity: 0;
        }
        50% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      .broken-heart {
        display: none;
        fill: #666;
      }
    </style>
  </head>
  <body>
    <canvas></canvas>
    <div class="card">
      <div class="heart-container">
        <svg viewBox="0 0 100 100" width="100" height="100">
          <path class="heart" d="M50 88.9L16.7 55.6C7.2 46.1 7.2 30.9 16.7 21.4s24.7-9.5 34.2 0L50 20.5l-0.9 0.9c9.5-9.5 24.7-9.5 34.2 0s9.5 24.7 0 34.2L50 88.9z" />
          <path class="broken-heart" d="M50 88.9L16.7 55.6C7.2 46.1 7.2 30.9 16.7 21.4s24.7-9.5 34.2 0L50 20.5l-0.9 0.9c9.5-9.5 24.7-9.5 34.2 0s9.5 24.7 0 34.2L50 88.9z" />
          <circle class="sparkle" cx="25" cy="25" r="2" />
          <circle class="sparkle" cx="75" cy="25" r="2" />
          <circle class="sparkle" cx="50" cy="15" r="2" />
        </svg>
      </div>

      <div class="question active" id="q1">
        <h1 class="message" id="typing-text1"></h1>
        <div class="btn-container">
          <button class="btn btn-hide1" id="buttonke1" onclick="nextQuestion(true, 1)">MAUU!</button>
          <div class="no-btn-container">
            <button class="btn no ke1 btn-hide1" onmouseover="dodgeNo1()">GAK!</button>
          </div>
        </div>
      </div>

      <div class="question" id="q2">
        <h1 class="message" id="typing-text2"></h1>
        <div class="btn-container">
          <button class="btn btn-hide2" id="buttonke2" onclick="nextQuestion(true, 2)">MAU DONG!</button>
          <div class="no-btn-container">
            <button class="btn no ke2 btn-hide2" onmouseover="dodgeNo2()">GAK AKAN!</button>
          </div>
        </div>
      </div>

      <div class="question" id="q3">
        <h1 class="message" id="typing-text3"></h1>
        <div class="btn-container">
          <button class="btn btn-hide3" id="buttonke3" onclick="nextQuestion(true, 3)">UTUTU SINI!</button>
          <div class="no-btn-container">
            <button class="btn no ke3 btn-hide3" onmouseover="dodgeNo3()">CIHH!</button>
          </div>
        </div>
      </div>

      <div class="question" id="final">
        <h1 class="message">
          <p id="typing-textFinal"></p>
          <br />
          You've made me the happiest person ever!
          <a href="heart.html"> ‚ù§Ô∏è </a>
        </h1>
      </div>
      <div class="question" id="rejected">
        <h1 class="message">üò¢ But... but... please?</h1>
        <div class="btn-container">
          <button class="btn" onclick="resetQuestions()">Ok, let me try again</button>
        </div>
      </div>
      <div class="floating-hearts"></div>
    </div>
    <script>
      var canvas = document.querySelector("canvas"),
        ctx = canvas.getContext("2d");

      var ww, wh;
      var maxHearts = 100; // Batasi jumlah hati yang dirender
      var hearts = [];

      function onResize() {
        ww = canvas.width = window.innerWidth;
        wh = canvas.height = window.innerHeight;
      }

      ctx.strokeStyle = "red";
      ctx.shadowBlur = 20;
      ctx.shadowColor = "hsla(0, 100%, 60%,0.5)";

      var precision = 100;

      var Heart = function () {
        this.x = Math.random() * ww;
        this.y = Math.random() * wh;
        this.size = Math.random() * 2 + 1;
        this.speedX = (Math.random() - 0.5) * 4;
        this.speedY = (Math.random() - 0.5) * 4;
        this.speedSize = Math.random() * 0.02 + 0.005;
        this.opacity = Math.random() * 0.5 + 0.5;
        this.blur = Math.random() * 10 + 5;
        this.vertices = [];

        for (var i = 0; i < precision; i++) {
          var step = (i / precision - 0.5) * (Math.PI * 2);
          this.vertices.push({
            x: 15 * Math.pow(Math.sin(step), 3),
            y: -(13 * Math.cos(step) - 5 * Math.cos(2 * step) - 2 * Math.cos(3 * step) - Math.cos(4 * step)),
          });
        }
      };

      Heart.prototype.draw = function () {
        this.size -= this.speedSize;
        this.x += this.speedX;
        this.y += this.speedY;

        if (this.size <= 0) return;

        ctx.save();
        ctx.translate(this.x, this.y);
        ctx.scale(this.size, this.size);
        ctx.beginPath();
        for (var i = 0; i < precision; i++) {
          ctx.lineTo(this.vertices[i].x, this.vertices[i].y);
        }
        ctx.globalAlpha = this.opacity;
        ctx.shadowBlur = this.blur;
        ctx.shadowColor = "rgba(255, 0, 0, 0.5)";
        ctx.fillStyle = "rgba(255, 0, 0, 0.6)";
        ctx.fill();
        ctx.restore();
      };

      function render() {
        ctx.clearRect(0, 0, ww, wh);

        if (hearts.length < maxHearts) {
          hearts.push(new Heart());
        }

        hearts.forEach((heart, index) => {
          heart.draw();
          if (heart.size <= 0 || heart.x < 0 || heart.x > ww || heart.y < 0 || heart.y > wh) {
            hearts.splice(index, 1);
          }
        });

        requestAnimationFrame(render);
      }

      onResize();
      window.addEventListener("resize", onResize);
      requestAnimationFrame(render);

      const text1 = "Will you be my Valentine? üíù";
      const text2 = "Would you like to go on a date with me? üåπ";
      const text3 = "Can I have a hug? ü§ó";
      const textFinal = "Click the Little Heart";
      // script.js
      const typingElement1 = document.getElementById("typing-text1");
      const typingElement2 = document.getElementById("typing-text2");
      const typingElement3 = document.getElementById("typing-text3");
      const typingElementFinal = document.getElementById("typing-textFinal");
      const Button1 = document.getElementById("buttonke1");
      const Button2 = document.getElementById("buttonke2");
      const Button3 = document.getElementById("buttonke3");
      const btnhide1 = document.querySelector(".btn-hide1");
      const btnhide2 = document.querySelector(".btn-hide2");
      const btnhide3 = document.querySelector(".btn-hide3");
      const nobtnhide1 = document.querySelector(".no.btn-hide1");
      const nobtnhide2 = document.querySelector(".no.btn-hide2");
      const nobtnhide3 = document.querySelector(".no.btn-hide3");

      let index = 0;
      let isTyping = false;

      function typeEffect1() {
        if (index < text1.length) {
          btnhide1.style.display = "none";
          nobtnhide1.style.display = "none";
          typingElement1.innerHTML += text1.charAt(index);
          index++;
          setTimeout(typeEffect1, 70); // Kecepatan mengetik
        } else {
          isTyping = false;
          btnhide1.style.display = "inline-block";
          nobtnhide1.style.display = "inline-block";
        }
      }
      function typeEffect2() {
        if (index < text2.length) {
          btnhide2.style.display = "none";
          nobtnhide2.style.display = "none";
          typingElement2.innerHTML += text2.charAt(index);
          index++;
          setTimeout(typeEffect2, 50); // Kecepatan mengetik
        } else {
          isTyping = false;
          btnhide2.style.display = "inline-block";
          nobtnhide2.style.display = "inline-block";
        }
      }
      function typeEffect3() {
        if (index < text3.length) {
          btnhide3.style.display = "none";
          nobtnhide3.style.display = "none";
          typingElement3.innerHTML += text3.charAt(index);
          index++;
          setTimeout(typeEffect3, 100); // Kecepatan mengetik
        } else {
          isTyping = false;
          btnhide3.style.display = "inline-block";
          nobtnhide3.style.display = "inline-block";
        }
      }
      function typeEffectFinal() {
        if (index < textFinal.length) {
          typingElementFinal.innerHTML += textFinal.charAt(index);
          index++;
          setTimeout(typeEffectFinal, 50); // Kecepatan mengetik
        } else {
          isTyping = false;
        }
      }

      typeEffect1();

      Button1.addEventListener("click", () => {
        if (!isTyping) {
          isTyping = true;
          typingElement1.innerHTML = ""; // Kosongkan teks
          index = 0;
          typeEffect2(); // Jalankan animasi mengetik
        }
      });
      Button2.addEventListener("click", () => {
        if (!isTyping) {
          isTyping = true;
          typingElement2.innerHTML = ""; // Kosongkan teks
          index = 0;
          typeEffect3(); // Jalankan animasi mengetik
        }
      });
      Button3.addEventListener("click", () => {
        if (!isTyping) {
          isTyping = true;
          typingElement3.innerHTML = ""; // Kosongkan teks
          index = 0;
          typeEffectFinal(); // Jalankan animasi mengetik
        }
      });

      let noButtonDodgeCount = 0;
      const maxDodges = 100;

      function nextQuestion(accepted, questionNumber) {
        if (accepted) {
          document.querySelector(`#q${questionNumber}`).classList.remove("active");
          if (questionNumber < 3) {
            document.querySelector(`#q${questionNumber + 1}`).classList.add("active");
          } else {
            document.querySelector("#final").classList.add("active");
            celebrateAcceptance();
          }
        }
      }

      function handleNo() {
        if (noButtonDodgeCount >= maxDodges) {
          document.querySelectorAll(".question").forEach((q) => q.classList.remove("active"));
          document.querySelector("#rejected").classList.add("active");
          document.querySelector(".heart").style.display = "none";
          document.querySelector(".broken-heart").style.display = "block";
        }
      }

      function dodgeNo1() {
        if (noButtonDodgeCount < maxDodges) {
          const btn = document.querySelector(".btn.no.ke1");
          btn.style.transform = `translate(${Math.random() * 500 - 300}px, ${Math.random() * 300 - 100}px)`;
          noButtonDodgeCount++;
        }
      }
      function dodgeNo2() {
        if (noButtonDodgeCount < maxDodges) {
          const btn = document.querySelector(".btn.no.ke2");
          btn.style.transform = `translate(${Math.random() * 500 - 300}px, ${Math.random() * 300 - 100}px)`;
          noButtonDodgeCount++;
        }
      }
      function dodgeNo3() {
        if (noButtonDodgeCount < maxDodges) {
          const btn = document.querySelector(".btn.no.ke3");
          btn.style.transform = `translate(${Math.random() * 500 - 300}px, ${Math.random() * 300 - 100}px)`;
          noButtonDodgeCount++;
        }
      }

      function resetQuestions() {
        document.querySelectorAll(".question").forEach((q) => q.classList.remove("active"));
        document.querySelector("#q1").classList.add("active");
        document.querySelector(".heart").style.display = "block";
        document.querySelector(".broken-heart").style.display = "none";
        noButtonDodgeCount = 0;
        const noBtn = document.querySelector(".btn.no");
        noBtn.style.transform = "none";
      }

      function celebrateAcceptance() {
        const container = document.querySelector(".floating-hearts");
        for (let i = 0; i < 15; i++) {
          createHeart(container);
        }
      }

      function createHeart(container) {
        const heart = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        heart.setAttribute("viewBox", "0 0 100 100");
        heart.style.width = "30px";
        heart.style.height = "30px";
        heart.style.position = "absolute";
        heart.style.left = Math.random() * 100 + "%";
        heart.style.animation = `float ${3 + Math.random() * 3}s linear infinite`;

        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d", "M50 88.9L16.7 55.6C7.2 46.1 7.2 30.9 16.7 21.4s24.7-9.5 34.2 0L50 20.5l-0.9 0.9c9.5-9.5 24.7-9.5 34.2 0s9.5 24.7 0 34.2L50 88.9z");
        path.style.fill = `hsl(${Math.random() * 60 + 330}, 100%, 65%)`;

        heart.appendChild(path);
        container.appendChild(heart);

        setTimeout(() => {
          container.removeChild(heart);
        }, 6000);
      }
    </script>
  </body>
</html>
